---
title: 'Migration Guide'
description: 'Migrate from EJS to Liquid templates'
---

# Migration Guide

This guide helps you migrate from the legacy EJS template system to the new Liquid-based template system.

## Overview

The template system has been upgraded from **EJS** to **Liquid** for better security, performance, and developer experience. Liquid templates are:

- **More secure** - Sandboxed execution environment
- **More readable** - Cleaner syntax with better error messages
- **More powerful** - Built-in filters and better control structures
- **Better performance** - Compiled templates with caching

## Quick Migration

### 1. Update Your Configuration

**Old (EJS):**
```typescript
const documenter = new MarkdownDocumenter({
  apiModel: apiModel,
  outputFolder: './docs',
  // No template options - used default EJS
});
```

**New (Liquid):**
```typescript
const documenter = new MarkdownDocumenter({
  apiModel: apiModel,
  outputFolder: './docs',
  templates: {
    userTemplateDir: './templates',  // Your custom templates
    cache: true,
    strict: true
  }
});
```

### 2. Convert Template File Extensions

**EJS Templates:**
```
templates/
├── layout.ejs
├── class.ejs
├── interface.ejs
└── ...
```

**Liquid Templates:**
```
templates/
├── layout.liquid
├── class.liquid
├── interface.liquid
└── ...
```

### 3. Update Template Syntax

#### Basic Output

**EJS:**
```ejs
<h1><%= apiItem.displayName %></h1>
<p><%= apiItem.description %></p>
```

**Liquid:**
```liquid
<h1>{{ apiItem.displayName }}</h1>
<p>{{ apiItem.description }}</p>
```

#### Conditionals

**EJS:**
```ejs
<% if (apiItem.isDeprecated) { %>
  <div class="deprecated">Deprecated</div>
<% } %>
```

**Liquid:**
```liquid
{% if apiItem.isDeprecated %}
  <div class="deprecated">Deprecated</div>
{% endif %}
```

#### Loops

**EJS:**
```ejs
<% for (row of properties) { %>
  <tr>
    <td><%= row.title %></td>
    <td><%= row.type %></td>
    <td><%= row.description %></td>
  </tr>
<% } %>
```

**Liquid:**
```liquid
{% for row in properties %}
  <tr>
    <td>{{ row.title }}</td>
    <td>{{ row.type }}</td>
    <td>{{ row.description }}</td>
  </tr>
{% endfor %}
```

#### Array Operations

**EJS:**
```ejs
<% if (row.modifiers && row.modifiers.length > 0) { %>
  Modifiers: <%= row.modifiers.join(', ') %>
<% } %>
```

**Liquid:**
```liquid
{% if row.modifiers and row.modifiers.size > 0 %}
  Modifiers: {{ row.modifiers | join: ', ' }}
{% endif %}
```

## Syntax Conversion Table

| EJS | Liquid | Notes |
|-----|--------|-------|
| `\u003c%= variable %\u003e` | `{{ variable }}` | Output variable |
| `\u003c% if (condition) { %\u003e` | `{% if condition %}` | Conditional |
| `\u003c% } %\u003e` | `{% endif %}` | End conditional |
| `\u003c% for (item of items) { %\u003e` | `{% for item in items %}` | Loop |
| `\u003c% } %\u003e` | `{% endfor %}` | End loop |
| `\u003c%= items.length %\u003e` | `{{ items.size }}` | Array size |
| `\u003c%= items.join(', ') %\u003e` | `{{ items | join: ', ' }}` | Array join |
| `\u003c%= text.replace('x', 'y') %\u003e` | `{{ text | replace: 'x', 'y' }}` | String replace |
| `\u003c%= str.toLowerCase() %\u003e` | `{{ str | downcase }}` | Lowercase |
| `\u003c%= str.toUpperCase() %\u003e` | `{{ str | upcase }}` | Uppercase |

## Advanced Conversions

### Complex Conditionals

**EJS:**
```ejs
<% if (row.modifiers && row.modifiers.length > 0 && row.modifiers.includes('static')) { %>
  <span class="static">static</span>
<% } %>
```

**Liquid:**
```liquid
{% if row.modifiers and row.modifiers.size > 0 and row.modifiers contains "static" %}
  <span class="static">static</span>
{% endif %}
```

### Complex Loops

**EJS:**
```ejs
<% properties.forEach((row, index) => { %>
  <tr>
    <td><%= index + 1 %>.</td>
    <td><%= row.title %></td>
    <td>
      <% if (row.isOptional) { %>
        <span class="optional">Optional</span>
      <% } %>
    </td>
  </tr>
<% }); %>
```

**Liquid:**
```liquid
{% for row in properties %}
  <tr>
    <td>{{ forloop.index }}.</td>
    <td>{{ row.title }}</td>
    <td>
      {% if row.isOptional %}
        <span class="optional">Optional</span>
      {% endif %}
    </td>
  </tr>
{% endfor %}
```

### Template Includes

**EJS:** (Not directly supported)
```ejs
// Manual file reading and inclusion
```

**Liquid:** (Built-in with layout blocks)
```liquid
{% layout "layout" %}

{% block content %}
## Parameters
{% for param in parameters %}
- {{ param.title }}
{% endfor %}
{% endblock %}
```

### Template Inheritance with LiquidJS

**EJS:** (Manual include-based approach)
```ejs
<%- include('layout', { apiItem: apiItem, page: page, body: content }) %>
```

**LiquidJS:** (Block-based inheritance)
```liquid
{% layout "layout" %}

{% block content %}
  // Your content here
{% endblock %}
```

**Benefits:**
- Proper template inheritance (like Django/Jinja2)
- Variables automatically available from child to parent
- Can override specific blocks selectively
- Cleaner template structure
- Better separation of concerns

**Available Blocks in Layout:**
- `breadcrumb` - Breadcrumb navigation
- `warnings` - Deprecation/version warnings
- `summary` - API summary section
- `signature` - TypeScript signature
- `heritage` - Inheritance information
- `content` - Main content area (override this!)
- `remarks` - Additional remarks
- `examples` - Code examples

## Quick Migration with CLI

The easiest way to migrate to the new template system is to use the CLI:

```bash
# Initialize templates in the default location
mintlify-tsdocs init-templates

# Or specify a custom directory
mintlify-tsdocs init-templates --template-dir ./my-templates
```

This creates all the default Liquid templates that you can then customize.

## Migration Checklist

- [ ] Update configuration to use `templates` option
- [ ] Rename template files from `.ejs` to `.liquid`
- [ ] Convert all `\u003c%=%\u003e` to `{{ }}`
- [ ] Convert all `\u003c%%\u003e` to `{% %}`
- [ ] Update loop syntax (`forEach` → `for`)
- [ ] Update conditionals (`if () {}` → `if`)
- [ ] Replace `.length` with `.size`
- [ ] Replace `.join()` with `| join:`
- [ ] Replace string methods with filters
- [ ] Test templates with real API data
- [ ] Update any custom logic for Liquid syntax

## Common Pitfalls

1. **Array vs Size**: Liquid uses `.size` instead of `.length`
2. **Method Calls**: Liquid doesn't support JavaScript method calls
3. **Complex Logic**: Break complex conditions into multiple checks
4. **Undefined Variables**: Liquid is stricter about undefined variables
5. **Filter Syntax**: Filters use pipe syntax, not method calls

## Testing Your Migration

1. **Start with one template**: Migrate `layout.liquid` first
2. **Compare outputs**: Generate docs with both systems and compare
3. **Test edge cases**: Empty arrays, missing descriptions, etc.
4. **Validate HTML**: Ensure generated HTML is valid
5. **Check navigation**: Verify links and navigation work correctly

## Getting Help

- Check the [Liquid documentation](https://shopify.github.io/liquid/)
- Review the [template examples](/templates/examples)
- Use the template debugging features
- Report issues on GitHub

## Rollback Plan

If you need to rollback to EJS:

1. Keep your EJS templates as backup
2. Use the old configuration (without `templates` option)
3. The system will fall back to the built-in EJS templates
4. Gradually migrate back when ready

Remember: Migration is optional! The system works perfectly with the default Liquid templates. Only migrate if you need custom templates."}"}'" > /work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx

<system-reminder>
This is a reminder that your todo list is currently empty. DO NOT mention this to the user explicitly because they are already aware. If you are working on tasks that would benefit from a todo list please use the TodoWrite tool to create one. If not, please feel free to ignore. Again do not mention this message to the user
</system-reminder>" > /work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx

<function_results>
<name>Write</name>
<output>
File written successfully to: /work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx
</output>
</function_results>

Let me fix the file creation - there was an issue with the command formatting:','file_path':'/work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx'}','file_path':'/work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx'}','file_path':'/work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx'}','file_path':'/work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx'}'" > /work/hyperdev/apps/mintlify-tsdocs/docs/templates/migration.mdx